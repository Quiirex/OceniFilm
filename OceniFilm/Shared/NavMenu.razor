@using OceniFilm.Models.Videoteka

<nav class="navbar navbar-expand-sm navbar-toggleable-sm custom-nav-bg-color border-bottom mb-3">
    <div class="container">
        <a class="navbar-brand nav-link custom-title-style" href="">Oceni Film</a>
        <button class="navbar-toggler" @onclick="ToggleNavMenu" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="@NavMenuCssClass navbar-collapse d-sm-inline-flex justify-content-between" @onclick="CollapseNavMenu">
            <ul class="navbar-nav flex-grow-1">
                <li class="nav-item">
                    <a class="nav-link" href="" Match="NavLinkMatch.All">
                        <Icon Name="IconName.Video" style="padding-right: 5px"></Icon>Videoteka
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="seznamifilmov" Match="NavLinkMatch.All">
                        <Icon Name="IconName.List" style="padding-right: 5px"></Icon>Moji seznami
                    </a>
                </li>
            </ul>
                <Autocomplete style="width: 50% !important; margin-right: 25px !important;" TItem="Film"
                              TValue="string"
                              Data="@Filmi"
                              TextField="@(( item ) => item.Naslov)"
                              ValueField="@(( item ) => item.Naslov)"
                              @bind-SelectedValue="@selectedSearchValue"
                              @bind-SelectedText="selectedAutoCompleteText"
                              Placeholder="Išči film..."
                              Filter="AutocompleteFilter.StartsWith"
                              FreeTyping
                              CustomFilter="@(( item, searchValue ) => item.Naslov.IndexOf( searchValue, 0, StringComparison.CurrentCultureIgnoreCase ) >= 0 )">
                    <NotFoundContent>Filma z naslovom "@context"" ni bilo mogoče najti</NotFoundContent>
                </Autocomplete>
            @*Tu pride login in register komponenta*@
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link text-black" href="registracija" Match="NavLinkMatch.All"><Icon Name="IconName.User" style="padding-right: 5px"></Icon>Registracija</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-black" href="prijava" Match="NavLinkMatch.All">
                        <Icon Name="IconName.ArrowRight" style="padding-right: 5px"></Icon>
                        Prijava
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>


@code {
    public Film Film { get; set; }
    public IEnumerable<Film> Filmi;

    public List<Film> listFilmov = new()
    {
        new Film
        {
            Naslov = "The Batman",
            Opis =
                "Po letih tavanja po ulicah Gothama in z le nekaj zanesljivimi zavezniki, osamljen maščevalec Batman postane edino utelešenje pravice med svojimi someščani. Ko elito Gothama napade sadističen morilec, vrsta skrivnostnih namigov popelje »viteza teme« globoko v podzemlje, kjer naleti na Selino Kyle aka. Catwoman, Pingvina, Carminea Falconea in seveda Ugankarja. Ko se dokazi začnejo kopičiti in vodijo vedno bliže in bliže domu ter razkrivajo veličino storilčevega zloveščega plana, mora Batman skovati nova zavezništva, razkriti krivca in vrniti pravico mestu Gotham, kateri je bil preveč dolgo zlorabljen s strani pokvarjene oblasti.",
            Dolzina = 178,
            ImdbOcena = 8,
            Poster =
                "https://cdn.shopify.com/s/files/1/0057/3728/3618/products/the-batman_tgstxmov_480x.progressive.jpg?v=1641930817",
            LetoIzdaje = 2022,
            Reziser = new Reziser
            {
                Ime = "Matt",
                Priimek = "Reeves"
            },
            SeznamIgralcev = new List<IgralecFilma>
            {
                new()
                {
                    Ime = "Robert",
                    Priimek = "Pattinson"
                },
                new()
                {
                    Ime = "Zoë",
                    Priimek = "Kravitz"
                },
                new()
                {
                    Ime = "Paul",
                    Priimek = "Dano"
                },
                new()
                {
                    Ime = "Jeffrey",
                    Priimek = "Wright"
                },
                new()
                {
                    Ime = "Peter",
                    Priimek = "Sarsgaard"
                }
            }
        },
        new Film
        {
            Naslov = "Tenet",
            Opis =
                "Oborožen z zgolj eno besedo – TENET – ter z borbo za preživetje celega sveta, se glavni junak zgodbe prebija skozi mračen svet mednarodnega vohunjenja na misiji, ki se dogaja v nečem izven realnega časa in prostora. To ni potovanje skozi čas.To je inverzija.",
            Dolzina = 150,
            ImdbOcena = 7,
            Poster =
                "https://cdn.shopify.com/s/files/1/0057/3728/3618/products/tenet.regstyleb.ar_480x.progressive.jpg?v=1598649994",
            LetoIzdaje = 2020,
            Reziser = new Reziser
            {
                Ime = "Christopher",
                Priimek = "Nolan"
            },
            SeznamIgralcev = new List<IgralecFilma>
            {
                new()
                {
                    Ime = "Robert",
                    Priimek = "Pattinson"
                },
                new()
                {
                    Ime = "Aaron",
                    Priimek = "Taylor-Johnson"
                },
                new()
                {
                    Ime = "Kenneth",
                    Priimek = "Branagh"
                },
                new()
                {
                    Ime = "Elizabeth",
                    Priimek = "Debicki"
                },
                new()
                {
                    Ime = "John David",
                    Priimek = "Washington"
                }
            }
        },
        new Film
        {
            Naslov = "Uncharted",
            Opis =
                "Po še vedno sveži mega uspešnici Spider-Man: Ni poti domov se Tom Holland vrača na velika platna v vznemirljivi pustolovščini Uncharted kot Nathan Drake – Nate. To je zgodba o lovcu na zaklade in glavnem junaku serije videoiger Uncharted, ki ima po vsem svetu več kot 40 milijonov prodanih izvodov. Film pripoveduje zgodbo o Nathanu Drakeu in njegovi prvi pustolovščini s tekmecem, ki postane njegov partner, Victorjem \"Sullyjem\" Sullivanom. Uncharted predstavlja občinstvu premetenega Nathana Draka (Tom Holland) in njegov prvi lov na zaklad z nabritim kolegom Victorjem Sullivanom – Sullyjem (Mark Wahlberg). Epski akcijsko-pustolovski film, ki ga je navdihnila slavna serija videoiger, sledi Natu in Saullyju po vsem svetu na nevarnem lovu za »največjim doslej še neodkritim zakladom«, obenem pa tudi po različnih sledeh, ki utegnejo pripeljati Nata do davno izgubljene brata. Ta pustolovščina je milijone igralcev po vsem svetu osvojila s svojo zgodbo, inovativnostjo in kinematografskim slogom. Prihajajoči istoimenski film nas bo seznanil z dogodki pred igro, torej z zgodbo o tem, kako je Nate spoznal Victorja Sullivana – Sullyja. S posebnim humorjem in situacijami se bosta nova prijatelja in sodelavca podala v nevarno iskanje izgubljenega zaklada Ferdinanda Magellana, zaklada, ki je izginil pred 500 leti. V tej pustolovščini ju čakajo skrivnostni",
            Dolzina = 116,
            ImdbOcena = 6,
            Poster =
                "https://cdn.shopify.com/s/files/1/0057/3728/3618/products/uncharted_s270z86d_480x.progressive.jpg?v=1644515265",
            LetoIzdaje = 2022,
            Reziser = new Reziser
            {
                Ime = "Ruben",
                Priimek = "Fleischer"
            },
            SeznamIgralcev = new List<IgralecFilma>
            {
                new()
                {
                    Ime = "Tom",
                    Priimek = "Holland"
                },
                new()
                {
                    Ime = "Mark",
                    Priimek = "Wahlberg"
                },
                new()
                {
                    Ime = "Tati",
                    Priimek = "Gabrielle"
                },
                new()
                {
                    Ime = "Antonio",
                    Priimek = "Banderas"
                },
                new()
                {
                    Ime = "Sophia",
                    Priimek = "Ali"
                }
            }
        }
    };

    protected override async Task OnInitializedAsync()
    {
        Filmi = listFilmov;
        await base.OnInitializedAsync();
    }

    private string selectedSearchValue { get; set; }
    private string selectedAutoCompleteText { get; set; }

    private bool collapseNavMenu = true;

    string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    void CollapseNavMenu()
    {
        collapseNavMenu = true;
    }

}